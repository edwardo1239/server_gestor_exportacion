# Versión 1.3.2

## Resumen General

Esta versión incluye importantes mejoras técnicas y funcionales derivadas de la auditoría Global G.A.P., enfocadas en la corrección de errores y el fortalecimiento de controles, filtros y trazabilidad del sistema.

---

## Cambios Principales

### Módulo de Acceso

* Activación del botón para visualizar la contraseña digitada (botón en forma de "ojito").
* Actualización del logo corporativo.

### Módulo Inventario y Logística

**Sección Ingresos Inventario / Vista Ingreso de Fruta:**

* Implementación del campo GGN con opciones Sí/No.
* Validaciones adicionales para el campo GGN:

  * Obligatorio (no permite campos vacíos).
  * Verificación automática del GGN según tipo de fruta ingresada.
  * Validación de fecha de vencimiento del GGN, mínimo 1 mes posterior al ingreso. Usuarios con permisos especiales podrán gestionar casos excepcionales.

**Sección Inventarios / Vista Fruta sin Procesar:**

* Nuevos filtros por tipo de fruta (Limón, Naranja, Mandarina) y por fruta con GGN.
* Visualización de columna GGN.

**Sección Historiales Inventario:**

* Filtros por fruta GGN añadidos en las vistas: Fruta Procesada y Lotes.
* Columna GGN agregada a la vista Ingreso Fruta.
* En la vista Listas de Empaque, se agregó campo GGN para mostrar el código del lote y se corrigió la presentación del código CoC de la planta.

### Cambios en el módulo Clasificación de Calidad

Se realizó una refactorización importante en la carpeta `clasificacionCalidad` para mejorar la mantenibilidad y claridad del código:

- **IngresoClasificacionCalidad.tsx**:  
  - Mejoras en la gestión de estado y lógica de guardado.
  - Nueva función para calcular porcentajes y validar datos antes de enviar.
  - Manejo de errores y mensajes de confirmación al usuario.
  - Limpieza automática del array de datos tras guardar.
  - Mejoras en la función de eliminación de elementos.
  - Reorganización del uso de hooks personalizados y estructura de renderizado.

- **Reestructuración de archivos**:  
  - Eliminados archivos antiguos (`functions/data.ts`, `functions/obtenerPorcentage.ts`, `functions/request.ts`).
  - Nuevos archivos para separar lógica y validaciones:
    - `functions/functions.ts`
    - `hooks/useDataIngresoClasificacion.ts`
    - `validations/validationsRequest.ts`

- **Otros cambios**:  
  - Ajuste de importaciones y mejor organización del código.
  - Separación de responsabilidades y eliminación de código obsoleto.

**Resumen:**  
Refactorización, mejor separación de lógica, eliminación de archivos obsoletos, creación de utilidades y hooks específicos, y mejoras en la experiencia de usuario con validaciones y manejo de errores.

### Correcciones Adicionales

* Corregido campo PRECINTO en documento de transporte "Carta de Responsabilidad".
* Corrección en el filtro del inventario de fruta sin procesar, que previamente no funcionaba correctamente.
* Corrección en el informe de listas de empaque para mostrar correctamente el código de la finca.

### Seguridad y Rendimiento

* Mejoras en validaciones cruzadas entre base de datos y aplicativo.
* Optimización y reorganización del código para mejor rendimiento.

---

## Instrucciones de Actualización

**Requisitos Previos**

* Asegúrese de tener la versión mínima del sistema operativo 1.3 instalada.
* Valide los perfiles de usuario para garantizar que tengan acceso a las nuevas funcionalidades y filtros.

**Pasos para Actualizar**

* Realice una copia de seguridad del sistema actual antes de iniciar la actualización.
* Ejecute el instalador proporcionado y siga las instrucciones en pantalla.
* Realice pruebas en los módulos afectados para confirmar que la actualización fue exitosa.

---

## Problemas Conocidos / Avisos Importantes

* Reportar cualquier inconsistencia o falla observada en los nuevos controles GGN directamente al equipo de Transformación Digital.

---

## Notas y Créditos

* **Desarrollado por:** Equipo de Transformación Digital.
* **Agradecimientos Especiales:**

  * Ingeniero Edwar Ariza, por la implementación técnica de mejoras.
  * Ingenieros Laura Cárdenas y Michael Guevara por la gestión del proceso de auditoría y definición de requerimientos críticos.

---

## Conclusión

La versión 1.3.1 representa un avance significativo en la mejora continua del sistema, aumentando la trazabilidad, fortaleciendo la seguridad operativa y asegurando el cumplimiento con estándares internacionales. Para consultas adicionales, contacte al equipo de Transformación Digital.
